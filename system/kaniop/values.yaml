image:
  repository: ghcr.io/pando85/kaniop

logging:
  ## Log level defined by RUST_LOG environment variable. Example: info,kaniop=trace
  ## Ref: https://docs.rs/tracing-subscriber/latest/tracing_subscriber/fmt/index.html#filtering-events-with-environment-variables
  level: "info,kaniop=debug"

resources:
  requests:
    cpu: 10m
    memory: 14Mi
  limits:
    cpu: 2
    memory: 256Mi

metrics:
  enabled: true
  serviceMonitor:
    enabled: true
    additionalLabels:
      release: monitoring

  prometheusRules:
    enabled: true
    additionalLabels:
      release: monitoring
    overrides:
      KaniopK8sApiErrors:
        expr: sum by(status_code) (increase(kaniop_kubernetes_client_http_requests_total{status_code=~"[4-5].."}[5m])) > 0
  dashboards:
    enabled: true
    label: grafana_dashboard
    additionalLabels:
      release: monitoring
    annotations:
      grafana.grafana.com/dashboards.target-directory: /tmp/dashboards/kaniop
