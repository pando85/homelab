#https://github.com/democratic-csi/democratic-csi/pkgs/container/democratic-csi#multiple-deployments
democratic-csi:
  driver:
    existingConfigSecret: zfs-grigri-nfs-driver-config
    config:
      driver: zfs-generic-nfs

  csiDriver:
    name: "org.democratic-csi.zfs-grigri-nfs"
    storageCapacity: true
    fsGroupPolicy: File

  controller:
    enabled: true
    strategy: deployment

    externalProvisioner:
      image: registry.k8s.io/sig-storage/csi-provisioner:v3.5.0

    externalResizer:
      enabled: true

    externalSnapshotter:
      enabled: true
      image: registry.k8s.io/sig-storage/csi-snapshotter:v6.2.2

    driver:
      enabled: true
      image: ghcr.io/democratic-csi/democratic-csi:v1.8.3
      logLevel: info
      resources:
        requests:
          cpu: 100m
          memory: 100Mi

  node:
    enabled: true

    driver:
      enabled: true
      image: ghcr.io/democratic-csi/democratic-csi:v1.8.3
      logLevel: info
      resources:
        requests:
          cpu: 100m
          memory: 100Mi

  storageClasses:
    - name: zfs-grigri-nfs
      defaultClass: false
      reclaimPolicy: Delete
      volumeBindingMode: Immediate
      allowVolumeExpansion: true
      parameters:
        fsType: nfs
      mountOptions:
        - noatime
        - nfsvers=4
      secrets:
        provisioner-secret:
        controller-publish-secret:
        node-stage-secret:
        node-publish-secret:
        controller-expand-secret:

  volumeSnapshotClasses:
    - name: zfs-grigri-nfs
      parameters:
        detachedSnapshots: "false"
